function boostrapMods(){$("[rel=tooltip]").tooltip(),$("[rel=popover]").popover(),$("[rel=popover]").click(function(t){t.preventDefault()}),$("[rel=popover][data-trigger=hover]").off("click"),$(".dropdown").on("show.bs.dropdown",function(){$(this).find(".dropdown-menu").first().stop(!0,!0).slideDown(100)}),$(".dropdown").on("hide.bs.dropdown",function(){$(this).find(".dropdown-menu").first().stop(!0,!0).slideUp(100)}),$(".dropdown-toggle").click(function(t){t.preventDefault()})}function bindComments(){var t="#comment_frame",e=$(t);$(".step-body .comment, #sharing_lightbox .comment").each(function(){var n=$(this),i=$(this).parent().parent().parent().parent();"sharing_lightbox"!=i.attr("id")&&$(this).html(getTemplate("_comment_icon")),$(this).find("a").on("touchstart, click",function(o){if(o.preventDefault(),stopEventPropagating(o),!$("#comment_frame").hasClass("animated")){n.append(loadingIndicator);var r,a,s="";if("sharing_lightbox"==i.attr("id"))s="/comments/image-get/"+i.attr("data-id"),r=-160,a="auto";else{var l=window.location.href.substr(window.location.href.lastIndexOf("/")+1);l=l.split("#")[0],l=l.split("?")[0],s="/comments/get/"+l+"/"+$(this).parent().attr("data-group"),r=32,a=-64}$.ajax({url:s,success:function(i){i.success&&(e.html(i.html),showCommentFrame(t,e,n,r,a)),n.children().last().remove()},timeout:3e3,dataType:"json",error:function(){e.html("Could not load comments."),showCommentFrame(t,e,n,r,a),n.children().last().remove()}})}})}),$("html").on("touchstart, click",function(n){eventTargetDoesNotInclude(n,"#comment_frame")&&(e.hasClass("animated")||"block"!=e.css("display")||animate(t,"fadeOutUp",function(){e.css("display","none")}))})}function showCommentFrame(t,e,n,i,o){var r="auto"==o;i||(i=32),o||(o=-64),e.css("display","block"),e.offset("ExtraSmall"==findBootstrapEnvironment()?{left:getViewportWidth()/2-e.outerWidth()/2,top:n.offset().top+o}:n.offset().left+i+e.outerWidth()>=getViewportWidth()?{left:getViewportWidth()-e.outerWidth()-10,top:n.offset().top+o}:{left:n.offset().left+i,top:n.offset().top+o}),animate(t,"fadeInDown",null),$("form#Comment").off(),$("form#Comment").ajaxForm({beforeSubmit:function(){e.find(".errors").text(""),$("form#Comment").find('input[type="submit"]').attr("disabled","disabled")},success:function(t){t.success?e.html(t.html):appendErrors(t.errors,e,".errors"),$("form#Comment").find('input[type="submit"]').attr("disabled",!1)},error:function(){e.find(".errors").append("Could not post comment, try again?"),$("form#Comment").find('input[type="submit"]').attr("disabled",!1)}}),r&&e.offset({top:n.offset().top-e.height()-32}),$(".js-close-comments").click(function(n){n.preventDefault(),animate(t,"fadeOutUp",function(){e.css("display","none")})}),$(".js-delete-comment").bind("click",function(t){if(t.preventDefault(),confirm("Delete this comment?")){var e=$(this).parent().parent();$.get($(this).attr("href")).done(function(t){t.success&&e.remove()}).fail(function(){})}}),$(".js-report-comment").bind("click",function(t){t.preventDefault(),confirm("Report this comment?")&&$.get($(this).attr("href")).done(function(t){alert(t.success?"Comment reported, thanks!":"Comment already reported.")}).fail(function(){})})}function bindDefinitions(){$("a[rel='definition']").click(function(t){var e=$(this);t.preventDefault();var n=$(this).attr("data-query");e.after(loadingIndicator),$.ajax({url:"/definitions/define/"+n,success:function(t){if("null"!=t){$(".step-body .js-inserted-definition").remove();var n=format(getTemplate("_inserted_definition"),{"definition-title":t.title,"definition-body":marked(t.body),"definition-id":marked(t._id)});e.parent().after(n),animate(e.parent().next(),"fadeInUp"),$(".js-close-inserted-definition").click(function(t){t.preventDefault(),animate($(this).parent(),"fadeOutDown",function(t){t.remove()})}),e.next().remove()}},timeout:3e3,dataType:"json",error:function(){e.next().remove(),console.log("Could not load definition.")}})}),$(".js-insert-definition").click(function(t){t.preventDefault();var e="{definition{TITLE, TERM}}";prompt("Macro:",e),editor.focus()}),$(".js-insert-inline-definition").click(function(t){t.preventDefault();var e="{inline-definition{TERM}}";prompt("Macro:",e),editor.focus()})}function bindEpicEditorFields(){if(defined("EpicEditor")&&$("#epiceditor-target").length>0){var t={textarea:"epiceditor-target",basePath:"/javascripts/epiceditor/",clientSideStorage:!1,localStorageName:"epiceditor",useNativeFullscreen:!0,parser:marked,file:{name:"epiceditor",defaultContent:"",autoSave:100},theme:{base:"themes/base/epiceditor.css",preview:"themes/preview/github.css",editor:"themes/editor/epic-dark.css"},focusOnLoad:!1,string:{togglePreview:"Toggle Preview Mode",toggleEdit:"Toggle Edit Mode",toggleFullscreen:"Enter Fullscreen"},autogrow:!1};editor=new EpicEditor(t).load(),$("#epiceditor-target").parent().hide()}}function appendErrors(t,e,n){for(var i in t){if(Array.isArray(t[i]))for(var o=0;o<t[i].length;o++)e.find(n).append(t[i][o]),e.find(n).append("<br>");else e.find(n).append(t[i]),e.find(n).append("<br>");animate(n,"fadeInUp")}}function createHideableRegions(){$(".hideable-inner").each(function(){$(this).find(".content").hide()}),$(".js-toggle-hideable").click(function(t){t.preventDefault();var e=$(this).parent().find(".content");isVisible(e)?($(this).text("Expand"),animateElement(e,"fadeOutDown",function(t){t.hide()})):($(this).text("Hide"),e.css("display","block"),animateElement(e,"fadeInUp"))})}function bindInsertRegionButton(){$(".js-insert-hideable").click(function(t){t.preventDefault();var e="{hideable{TITLE, CONTENT}}";prompt("Macro:",e),editor.focus()})}function setUpBannerImage(){$(".banner-image").each(function(){var t=$(this);t.attr("data-background")&&""!=t.attr("data-background")&&t.css("background-image","url("+t.attr("data-background")+")")}),$(".step-body img").addClass("lazy")}function scrollBinding(){$(".progress-bar-row").hide(),$(".step-body").waypoint(function(t){"down"==t?$(".progress-bar-row").slideDown(300):$(".progress-bar-row").slideUp(300)})}function updateProgressBars(){$(".progress-list-wrapper .progress").each(function(){var t=($(this),$(this).parent()),e=t.find("ul.progress-list li:first a"),n=t.find("ul.progress-list li.current-step a");$(this).css("width",n.offset().left-e.offset().left),$(this).css("left",e.position().left+2),$(this).css("top",e.position().top)})}function bindProgressBarResize(){updateProgressBars(),$(window).resize(updateProgressBars)}function bindSharingImageForm(){$sharedImageForm.ajaxForm({beforeSubmit:function(){$sharedImageForm.find(".errors").text(""),$sharedImageForm.find('input[type="submit"]').attr("disabled","disabled")},success:function(t){t.success?t.refresh&&location.reload(!0):appendErrors(t.errors,$sharedImageForm,".errors"),$sharedImageForm.find('input[type="submit"]').attr("disabled",!1)},error:function(){$sharedImageForm.find(".errors").append("Could not share image, try again?"),$sharedImageForm.find('input[type="submit"]').attr("disabled",!1)}})}function bindPageResize(){updateProgressBars(),$(window).resize(updateLearnGrid)}function updateLearnGrid(){$(".shared-image-holder").each(function(){$(this).css("height",$(this).css("width"))}),resizeLightboxImage()}function hideLightbox(){animate("#sharing_lightbox","fadeOutUp",function(){$("#sharing_lightbox").css("display","none")}),animate("#sharing_lightbox_overlay","fadeOutUp",function(){$("#sharing_lightbox_overlay").css("display","none")})}function showLightbox(t){$currentLightboxSource=t,$("#sharing_lightbox").css("display","block"),$("#sharing_lightbox_overlay").css("display","block"),$("#sharing_lightbox img").attr("src",t.attr("src")),$("#sharing_lightbox .download-link").attr("href",t.attr("src")),$("#sharing_lightbox").attr("data-id",t.attr("data-id")),$("#sharing_lightbox .description p").text(t.attr("data-description")),animate("#sharing_lightbox","fadeInDown",null),resizeLightboxImage()}function resizeLightboxImage(){if($("#sharing_lightbox img").attr("style",null),$("#sharing_lightbox img").height()>$("#sharing_lightbox .image-frame").height()){var t=$("#sharing_lightbox .image-frame").height()/$("#sharing_lightbox img").height();$("#sharing_lightbox img").height($("#sharing_lightbox .image-frame").height()),$("#sharing_lightbox img").width($("#sharing_lightbox img").width()*t)}}function showNextImage(){showLightbox($currentLightboxSource.parent().parent().next().find(".shared-image-holder img"))}function showPrevImage(){showLightbox($currentLightboxSource.parent().parent().prev().find(".shared-image-holder img"))}function bindSlugFields(){$(".js-slug").keyup(function(){var t="#"+$(this).attr("data-object")+"_"+$(this).attr("data-target");$(t).val(convertToSlug($(this).val()))})}function bindLowercaseFields(){$(".js-lowercase").keyup(function(){var t="#"+$(this).attr("data-object")+"_"+$(this).attr("data-target");$(t).val(convertToLowercase($(this).val()))})}function bindSortableLists(){jQuery().sortable&&($(".js-sortable").off(),$(".js-sortable-delete-link").off(),$(".js-sortable-add-new").off(),$(".js-sortable").sortable(),$(".js-sortable-delete-link").bind("click",function(t){t.preventDefault(),$(this).parent().remove()}),$(".js-sortable-add-new").click(function(t){var e=$($(this).attr("data-read-selection-from")),n=$(this).attr("data-hidden-field-name"),i=$($(this).attr("data-target-list"));t.preventDefault(),i.append(format(getTemplate("_lesson_list_entry"),{"item-text":e.find("option:selected").text(),"field-name":n,"field-value":e.val()})),bindSortableLists()}))}function bindUpload(){var t="#upload_frame",e=$(t);$(".js-upload-link").click(function(n){n.preventDefault(),stopEventPropagating(n),e.hasClass("animated")||$.ajax({url:"/upload/",success:function(n){n.success&&(e.html(n.html),showUploadFrame(t,e))},timeout:1e3,dataType:"json",error:function(){e.html("Could not load upload form."),showUploadFrame(t,e)}})}),$("html").click(function(n){eventTargetDoesNotInclude(n,"#upload_frame")&&(e.hasClass("animated")||"block"!=e.css("display")||animate(t,"fadeOutUp",function(){e.css("display","none")}))})}function showUploadFrame(t,e){e.css("display","block"),e.offset({left:$(".js-upload-link").offset().left,top:$(".js-upload-link").offset().top+40}),animate(t,"fadeInDown",null),$("form#Upload").off(),$("form#Upload").ajaxForm({beforeSubmit:function(){e.find(".errors").text(""),e.find(".file").text(""),$("form#Upload").find('input[type="submit"]').attr("disabled","disabled")},success:function(t){t.success?(e.find(".file").html("<a href='"+t.file+"'>View File</a>&nbsp;<a class='js-copy-link' href='"+t.file+"'>Get Link</a>"),e.find(".js-copy-link").click(function(t){t.preventDefault(),window.prompt("Copy to clipboard: Ctrl/Cmd+C, Enter",$(this).attr("href"))})):appendErrors(t.errors,e,".errors"),$("form#Upload").find('input[type="submit"]').attr("disabled",!1)},error:function(){e.find(".errors").append("Could not post comment, try again?"),$("form#Upload").find('input[type="submit"]').attr("disabled",!1)}})}function animate(t,e,n){animateElement($(t),e,n)}function animateElement(t,e,n){if(supportsTransitions()){t.attr("data-timeout-id")&&window.clearTimeout(t.attr("data-timeout-id")),t.addClass(e),t.addClass("animated");var i=window.setTimeout(function(){t.removeClass(e),t.removeClass("animated"),null!=n&&n(t)},2e3);t.attr("data-timeout-id",i),t.off(),t.one("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){t.removeClass(e),t.removeClass("animated"),null!=n&&n(t)})}else n(t)}function stopEventPropagating(t){t||(t=window.event),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function eventTargetDoesNotInclude(t,e){return 0==$(t.target).closest(e).length}function getTemplate(t){return $("#"+t+"_template").html()}function format(t,e){for(var n in e){var i=new RegExp("{{#"+n+"}}","g");t=t.replace(i,e[n])}return t}function defined(t){return"undefined"!=typeof window[t]}function convertToSlug(t){return t.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}function convertToLowercase(t){return t.toLowerCase()}function supportsTransitions(){var t=document.body||document.documentElement,e=t.style,n="transition";if("string"==typeof e[n])return!0;var i=["Moz","webkit","Webkit","Khtml","O","ms"];n=n.charAt(0).toUpperCase()+n.substr(1);for(var o=0;o<i.length;o++)if("string"==typeof e[i[o]+n])return!0;return!1}function isVisible(t){return"none"!=t.css("display")&&"hidden"!=t.css("display")?!0:!1}function insertTextAtCursor(t){var e,n;window.getSelection?(e=window.getSelection(),e.getRangeAt&&e.rangeCount&&(n=e.getRangeAt(0),n.deleteContents(),n.insertNode(document.createTextNode(t)))):document.selection&&document.selection.createRange&&(document.selection.createRange().text=t)}function saveSelection(){if(window.getSelection){if(sel=window.getSelection(),sel.getRangeAt&&sel.rangeCount)return sel.getRangeAt(0)}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null}function restoreSelection(t){t&&(window.getSelection?(sel=window.getSelection(),sel.removeAllRanges(),sel.addRange(t)):document.selection&&t.select&&t.select())}function findBootstrapEnvironment(){var t=["ExtraSmall","Small","Medium","Large"],e=["xs","sm","md","lg"],n=$("<div>");n.appendTo($("body"));for(var i=e.length-1;i>=0;i--){var o=e[i];if(n.addClass("hidden-"+o),n.is(":hidden"))return n.remove(),t[i]}}function getViewportWidth(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)}function getViewportHeight(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)}(function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},e=[].slice;!function(t,e){return"function"==typeof define&&define.amd?define("waypoints",["jquery"],function(n){return e(n,t)}):e(t.jQuery,t)}(window,function(n,i){var o,r,a,s,l,d,c,f,u,h,p,m,g,b,v,$;return o=n(i),f=t.call(i,"ontouchstart")>=0,s={horizontal:{},vertical:{}},l=1,c={},d="waypoints-context-id",p="resize.waypoints",m="scroll.waypoints",g=1,b="waypoints-waypoint-ids",v="waypoint",$="waypoints",r=function(){function t(t){var e=this;this.$element=t,this.element=t[0],this.didResize=!1,this.didScroll=!1,this.id="context"+l++,this.oldScroll={x:t.scrollLeft(),y:t.scrollTop()},this.waypoints={horizontal:{},vertical:{}},this.element[d]=this.id,c[this.id]=this,t.bind(m,function(){var t;return e.didScroll||f?void 0:(e.didScroll=!0,t=function(){return e.doScroll(),e.didScroll=!1},i.setTimeout(t,n[$].settings.scrollThrottle))}),t.bind(p,function(){var t;return e.didResize?void 0:(e.didResize=!0,t=function(){return n[$]("refresh"),e.didResize=!1},i.setTimeout(t,n[$].settings.resizeThrottle))})}return t.prototype.doScroll=function(){var t,e=this;return t={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!f||t.vertical.oldScroll&&t.vertical.newScroll||n[$]("refresh"),n.each(t,function(t,i){var o,r,a;return a=[],r=i.newScroll>i.oldScroll,o=r?i.forward:i.backward,n.each(e.waypoints[t],function(t,e){var n,o;return i.oldScroll<(n=e.offset)&&n<=i.newScroll?a.push(e):i.newScroll<(o=e.offset)&&o<=i.oldScroll?a.push(e):void 0}),a.sort(function(t,e){return t.offset-e.offset}),r||a.reverse(),n.each(a,function(t,e){return e.options.continuous||t===a.length-1?e.trigger([o]):void 0})}),this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}},t.prototype.refresh=function(){var t,e,i,o=this;return i=n.isWindow(this.element),e=this.$element.offset(),this.doScroll(),t={horizontal:{contextOffset:i?0:e.left,contextScroll:i?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:i?0:e.top,contextScroll:i?0:this.oldScroll.y,contextDimension:i?n[$]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},n.each(t,function(t,e){return n.each(o.waypoints[t],function(t,i){var o,r,a,s,l;return o=i.options.offset,a=i.offset,r=n.isWindow(i.element)?0:i.$element.offset()[e.offsetProp],n.isFunction(o)?o=o.apply(i.element):"string"==typeof o&&(o=parseFloat(o),i.options.offset.indexOf("%")>-1&&(o=Math.ceil(e.contextDimension*o/100))),i.offset=r-e.contextOffset+e.contextScroll-o,i.options.onlyOnScroll&&null!=a||!i.enabled?void 0:null!==a&&a<(s=e.oldScroll)&&s<=i.offset?i.trigger([e.backward]):null!==a&&a>(l=e.oldScroll)&&l>=i.offset?i.trigger([e.forward]):null===a&&e.oldScroll>=i.offset?i.trigger([e.forward]):void 0})})},t.prototype.checkEmpty=function(){return n.isEmptyObject(this.waypoints.horizontal)&&n.isEmptyObject(this.waypoints.vertical)?(this.$element.unbind([p,m].join(" ")),delete c[this.id]):void 0},t}(),a=function(){function t(t,e,i){var o,r;"bottom-in-view"===i.offset&&(i.offset=function(){var t;return t=n[$]("viewportHeight"),n.isWindow(e.element)||(t=e.$element.height()),t-n(this).outerHeight()}),this.$element=t,this.element=t[0],this.axis=i.horizontal?"horizontal":"vertical",this.callback=i.handler,this.context=e,this.enabled=i.enabled,this.id="waypoints"+g++,this.offset=null,this.options=i,e.waypoints[this.axis][this.id]=this,s[this.axis][this.id]=this,o=null!=(r=this.element[b])?r:[],o.push(this.id),this.element[b]=o}return t.prototype.trigger=function(t){return this.enabled?(null!=this.callback&&this.callback.apply(this.element,t),this.options.triggerOnce?this.destroy():void 0):void 0},t.prototype.disable=function(){return this.enabled=!1},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},t.prototype.destroy=function(){return delete s[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},t.getWaypointsByElement=function(t){var e,i;return(i=t[b])?(e=n.extend({},s.horizontal,s.vertical),n.map(i,function(t){return e[t]})):[]},t}(),h={init:function(t,e){var i;return e=n.extend({},n.fn[v].defaults,e),null==(i=e.handler)&&(e.handler=t),this.each(function(){var t,i,o,s;return t=n(this),o=null!=(s=e.context)?s:n.fn[v].defaults.context,n.isWindow(o)||(o=t.closest(o)),o=n(o),i=c[o[0][d]],i||(i=new r(o)),new a(t,i,e)}),n[$]("refresh"),this},disable:function(){return h._invoke.call(this,"disable")},enable:function(){return h._invoke.call(this,"enable")},destroy:function(){return h._invoke.call(this,"destroy")},prev:function(t,e){return h._traverse.call(this,t,e,function(t,e,n){return e>0?t.push(n[e-1]):void 0})},next:function(t,e){return h._traverse.call(this,t,e,function(t,e,n){return e<n.length-1?t.push(n[e+1]):void 0})},_traverse:function(t,e,o){var r,a;return null==t&&(t="vertical"),null==e&&(e=i),a=u.aggregate(e),r=[],this.each(function(){var e;return e=n.inArray(this,a[t]),o(r,e,a[t])}),this.pushStack(r)},_invoke:function(t){return this.each(function(){var e;return e=a.getWaypointsByElement(this),n.each(e,function(e,n){return n[t](),!0})}),this}},n.fn[v]=function(){var t,i;return i=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],h[i]?h[i].apply(this,t):n.isFunction(i)?h.init.apply(this,arguments):n.isPlainObject(i)?h.init.apply(this,[null,i]):n.error(i?"The "+i+" method does not exist in jQuery Waypoints.":"jQuery Waypoints needs a callback function or handler option.")},n.fn[v].defaults={context:i,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},u={refresh:function(){return n.each(c,function(t,e){return e.refresh()})},viewportHeight:function(){var t;return null!=(t=i.innerHeight)?t:o.height()},aggregate:function(t){var e,i,o;return e=s,t&&(e=null!=(o=c[n(t)[0][d]])?o.waypoints:void 0),e?(i={horizontal:[],vertical:[]},n.each(i,function(t,o){return n.each(e[t],function(t,e){return o.push(e)}),o.sort(function(t,e){return t.offset-e.offset}),i[t]=n.map(o,function(t){return t.element}),i[t]=n.unique(i[t])}),i):[]},above:function(t){return null==t&&(t=i),u._filter(t,"vertical",function(t,e){return e.offset<=t.oldScroll.y})},below:function(t){return null==t&&(t=i),u._filter(t,"vertical",function(t,e){return e.offset>t.oldScroll.y})},left:function(t){return null==t&&(t=i),u._filter(t,"horizontal",function(t,e){return e.offset<=t.oldScroll.x})},right:function(t){return null==t&&(t=i),u._filter(t,"horizontal",function(t,e){return e.offset>t.oldScroll.x})},enable:function(){return u._invoke("enable")},disable:function(){return u._invoke("disable")},destroy:function(){return u._invoke("destroy")},extendFn:function(t,e){return h[t]=e},_invoke:function(t){var e;return e=n.extend({},s.vertical,s.horizontal),n.each(e,function(e,n){return n[t](),!0})},_filter:function(t,e,i){var o,r;return(o=c[n(t)[0][d]])?(r=[],n.each(o.waypoints[e],function(t,e){return i(o,e)?r.push(e):void 0}),r.sort(function(t,e){return t.offset-e.offset}),n.map(r,function(t){return t.element})):[]}},n[$]=function(){var t,n;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],u[n]?u[n].apply(null,t):u.aggregate.call(null,n)},n[$].settings={resizeThrottle:100,scrollThrottle:30},o.on("load.waypoints",function(){return n[$]("refresh")})})}).call(this),$(function(){defined("Select2")&&$(".js-select2").select2(),jQuery().lazyload&&$("img.lazy").lazyload({threshold:200,effect:"fadeIn"}),$(".step-body a[rel='definition']").each(function(){$(this).html($(this).html()+' <i class="fa fa-book"></i>'),"undefined"==typeof $(this).attr("title")&&$(this).attr("title","Show Definition"),$(this).tooltip()}),$(".step-body .comment a").tooltip(),$(".step-body a[href*='http']").each(function(){$(this).html($(this).html()+' <i class="fa fa-external-link"></i>'),"undefined"==typeof $(this).attr("title")&&$(this).attr("title",$(this).attr("href")),$(this).attr("target","new"),$(this).tooltip()})}),boostrapMods(),bindComments(),bindDefinitions();var editor;bindEpicEditorFields(),createHideableRegions(),bindInsertRegionButton(),setUpBannerImage(),scrollBinding();var loadingIndicator='<div class="spinner"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>';bindProgressBarResize();var $sharedImageForm=$("form#addSharedImageForm");bindSharingImageForm(),bindPageResize(),updateLearnGrid();var sharingLightboxId="#sharing_lightbox",$sharingLightbox=$(sharingLightboxId);$(".js-close-lightbox").click(function(){hideLightbox()}),$("html").click(function(t){eventTargetDoesNotInclude(t,sharingLightboxId)&&eventTargetDoesNotInclude(t,"#comment_frame")&&($sharingLightbox.hasClass("animated")||"block"!=$sharingLightbox.css("display")||hideLightbox())});var $currentLightboxSource;$(".sharing-step img.lazy").click(function(){showLightbox($(this)),animate("#sharing_lightbox_overlay","fadeInDown",null)}),$("#shared_image_shared_image").change(function(){this.files[0].size/1048576>2?$sharedImageForm.find(".errors").append("This file is too large (bigger than 2MB), try compressing or resizing it."):$sharedImageForm.ajaxSubmit({url:"/upload-image/",type:"post",beforeSubmit:function(){$sharedImageForm.find(".errors").text(""),$sharedImageForm.find('input[type="submit"]').attr("disabled","disabled")},success:function(t){t.success?($("#shared_image_url").val(t.file),$("#shared_image_preview").attr("src",t.file)):appendErrors(t.errors,$sharedImageForm,".errors"),$sharedImageForm.find('input[type="submit"]').attr("disabled",!1)},error:function(){$sharedImageForm.find(".errors").append("Could not share image, try again?"),$sharedImageForm.find('input[type="submit"]').attr("disabled",!1)}})}),document.onkeydown=function(t){t=t||window.event;var e="number"==typeof t.which?t.which:t.keyCode;$("#sharing_lightbox").is(":visible")&&(37==e&&showPrevImage(),39==e&&showNextImage())},bindSlugFields(),bindLowercaseFields(),bindSortableLists(),bindUpload();