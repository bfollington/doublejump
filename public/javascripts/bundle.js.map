{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","javascript/app.js","app/views/editor/step_view.js","app/views/ui/js/_comment_icon_view.js","app/views/ui/js/_comment_list_view.js","app/views/ui/js/_sortable_content_list_entry_model.js","app/views/ui/js/_sortable_content_list_entry_view.js","javascript/ace.js","javascript/backbone/ajax_view.js","javascript/backbone/underscore_settings.js","javascript/bootstrap-mod.js","javascript/comments.js","javascript/definitions.js","javascript/hideable-region.js","javascript/learn.js","javascript/loading.js","javascript/mixins/ajax_form.js","javascript/mixins/convert_ace.js","javascript/mixins/course_edit_page.js","javascript/mixins/edit_step.js","javascript/mixins/editor_course_list.js","javascript/mixins/icon_tab.js","javascript/mixins/mixin_controller.js","javascript/mixins/payment_details.js","javascript/mixins/progress_bars.js","javascript/mixins/sharing.js","javascript/mixins/sortable_item_list.js","javascript/mixins/step_list.js","javascript/mixins/ui_binder.js","javascript/notifications.js","javascript/payment_validation.js","javascript/pillar/pillar.js","javascript/progress-bar.js","javascript/search.js","javascript/sharing-progress.js","javascript/slug-fields.js","javascript/sortable-list.js","javascript/two-cols.js","javascript/ui/icon-tab.js","javascript/util/_jquery_extend.js","javascript/util/_util.js","javascript/util/animate-util.js","javascript/util/event-util.js","javascript/util/templating-util.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bundle.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// base.js binds UI stuff and initialises some important bits\n\nvar mathjax = false;\nwindow.doublejump = window.doublejump || {};\n\nvar mixins = require(\"mixins/mixin_controller\"),\n    bootstrapMod = require(\"bootstrap-mod\"),\n    definitions = require(\"definitions\"),\n    hideable = require(\"hideable-region\"),\n    learn = require(\"learn\"),\n    notifications = require(\"notifications\"),\n    jqueryExtend = require(\"util/_jquery_extend\"),\n    search = require(\"search\"),\n    slug = require(\"slug-fields\"),\n    loading = require(\"loading\"),\n    util = require(\"util/_util\"),\n    twoCols = require(\"two-cols\"),\n    underscoreSettings = require(\"backbone/underscore_settings\"),\n    uiBinding = require(\"mixins/ui_binder\"),\n    comments = require(\"comments\");\n\n$( function() {\n\n    util.init();\n    loading();\n\n    // Remove no-js class to signify that we... uh... have js\n    $(\"html\").first().removeClass(\"no-js\");\n\n    // Initialise all the individual page controllers for the app\n    mixins.intialiseControllers();\n\n    underscoreSettings();\n\n    bootstrapMod();\n    jqueryExtend();\n\n    definitions.convertDefinitionLinks();\n    definitions.bindDefinitions();\n\n    hideable.createHideableRegions();\n    hideable.bindInsertRegionButton();\n\n    search.bindCourseSearchField();\n    search.bindDefinitionSearchField();\n\n    twoCols.repositionColumns();\n\n    slug.bindSlugFields();\n    slug.bindLowercaseFields();\n\n    learn.setup();\n\n    notifications.bindRemoveLinks();\n\n    uiBinding();\n\n    // comments.bindComments();\n\n    // Configure select2 when the plugin is present\n    if ( typeof $.fn.select2 != \"undefined\" )\n    {\n        $(\".js-select2\").select2();\n    }\n\n    //Configure lazy loading of images when the plugin is present\n    //Only if we are on the appropriate page, need to used defined? util\n    if (jQuery().lazyload)\n    {\n        $(\"img.lazy\").lazyload(\n        {\n            threshold : 200\n        });\n    }\n\n    // Add a book icon to every definition link in the body of the step\n    $(\".step-body a[rel='definition']\").each( function() {\n\n        $(this).html($(this).html() + ' <i class=\"fa fa-book\"></i>');\n\n        if ( typeof $(this).attr(\"title\") == \"undefined\")\n        {\n            $(this).attr(\"title\", \"Show Definition\");\n        }\n\n        $(this).tooltip();\n\n    });\n\n    // Add tooltips to comment links\n    $(\".step-body .comment a\").tooltip();\n\n    // Add icons to external links\n    $(\".step-body a[href*='http']\").each( function() {\n\n        $(this).html($(this).html() + ' <i class=\"fa fa-external-link\"></i>');\n\n        if ( typeof $(this).attr(\"title\") == \"undefined\")\n        {\n            $(this).attr(\"title\", $(this).attr(\"href\").trunc(50));\n        }\n\n        $(this).attr(\"target\", \"new\");\n\n        $(this).tooltip({placement: \"top\"});\n\n    });\n\n    //Include mathjax if needed\n    if ($(\"div:contains('{\\\\[')\").length > 0 || $(\"div:contains('\\\\(')\").length > 0)\n    {\n\n        mathjax = true;\n\n        (function () {\n          var head = document.getElementsByTagName(\"head\")[0], script;\n          script = document.createElement(\"script\");\n          script.type = \"text/x-mathjax-config\";\n          script[(window.opera ? \"innerHTML\" : \"text\")] =\n            \"MathJax.Hub.Config({\\n\" +\n            \"});\"\n          head.appendChild(script);\n          script = document.createElement(\"script\");\n          script.type = \"text/javascript\";\n          script.src  = \"http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML\";\n          head.appendChild(script);\n        })();\n    }\n\n});\n","var Pillar = require(\"pillar/pillar\");\nvar sortable = require(\"sortable-list\");\nvar aceUtil = require(\"ace\");\n\nvar ComposeStepView = Pillar.View.extend({\n    init: function(opts)\n    {\n        console.log(\"INIT\");\n        this.rebuildIdList();\n        this.countSubmits = 0;\n        sortable.sortable(this.$el.find(\".js-sortable-blocks\"), {afterDrag: this.rebuildIdList, itemSelector: \".content\", handle: 'h4'});\n        this.ajaxForm();\n    },\n\n    events: {\n        \"click .js-add-content\": \"addContent\"\n    },\n\n    beginSubmits: function()\n    {\n        this.countSubmits = 0;\n        this.$el.find(\".content form\").submit();\n    },\n\n    ajaxForm: function()\n    {\n        this.$el.ajaxForm({\n            beforeSubmit:  function (data, $form, options) {\n\n            },\n            success: function (data, text, xhr, $form) {\n                if (data.success)\n                {\n                    console.log(\"Form submission returned success, refreshing page...\");\n                    window.location.reload();\n                } else {\n                    console.error(\"Form submission returned failure\");\n                }\n            },\n            error: function (data) {\n                console.error(\"Form submission failed\");\n            }\n        });\n    },\n\n    addContent: function(e)\n    {\n        var $button = $(e.target);\n        var templateName = $button.attr(\"data-content\");\n\n        var view = new ComposeStepContentView({\n            template: _.template( $(\"#\" + templateName + \"_template\").html() ),\n            parent: this\n        });\n\n        this.$el.find(\".contents\").append(view.render().el);\n        view.convertTextArea();\n        view.ajaxForm();\n    },\n\n    rebuildIdList: function()\n    {\n        // Clear the existing data\n        console.log(\"Rebulding id list\");\n        $(\".content-ids\").html(\"\");\n\n        $(\".contents .content .id-field\").each( function () {\n\n            var compile = _.template( $(\"#_step_content_id_entry_template\").html() );\n            var template = compile({\"id\": $(this).val() });\n\n            $(\".content-ids\").append(template);\n\n        });\n    },\n\n    contentSubmissionDone: function()\n    {\n        this.countSubmits += 1;\n\n        if (this.countSubmits == this.$el.find(\".content form\").length)\n        {\n            this.finishedSubmissions();\n        }\n    },\n\n    contentSubmissionError: function()\n    {\n        console.error(\"Submission of one content block failed.\");\n        this.countSubmits = 0;\n    },\n\n    finishedSubmissions: function()\n    {\n        this.$el.find(\"#addStepForm\").submit();\n    }\n});\n\nvar ComposeStepContentView = Pillar.View.extend({\n    init: function(opts)\n    {\n        this.parent = opts.parent;\n        this.convertTextArea();\n        this.ajaxForm();\n    },\n\n    events: {\n        \"click .js-delete-content\": \"deleteSelf\",\n        \"click .js-minimise-content\": \"minimiseSelf\",\n        \"change .code-input-language\": \"codeLanguageChange\"\n    },\n\n    convertTextArea: function()\n    {\n        aceUtil.convertTextAreas(this.$el);\n    },\n\n    ajaxForm: function()\n    {\n        var that = this;\n\n        this.$el.find(\"form\").ajaxForm({\n            beforeSubmit:  function (data, $form, options) {\n\n            },\n            success: function (data, text, xhr, $form) {\n                if (data.success)\n                {\n                    $form.find(\".id-field\").val(data.id);\n                    that.parent.rebuildIdList();\n                    that.parent.contentSubmissionDone();\n                } else {\n                    that.parent.contentSubmissionError();\n                }\n            },\n            error: function (data) {\n                console.error(\":(\");\n                that.parent.contentSubmissionError();\n            }\n        });\n    },\n\n    draw: function()\n    {\n        var html = this.template({});\n        this.setElement(html);\n    },\n\n    deleteSelf: function(e)\n    {\n        e.preventDefault();\n        var confirmation = confirm(\"Are you sure you want to remove this content block?\");\n\n        if (confirmation)\n        {\n            // parent.rebuildIdList();\n            this.remove();\n        }\n    },\n\n    minimiseSelf: function(e)\n    {\n        e.preventDefault();\n        this.$el.toggleClass(\"minimised\");\n    },\n\n    codeLanguageChange: function(e)\n    {\n        var $el = $(e.target);\n\n        var editor = ace.edit($el.siblings(\".ace_editor\")[0]);\n        console.log(editor);\n        editor.getSession().setMode(\"ace/mode/\" + $el.val());\n    }\n});\n\nmodule.exports = {\n    ComposeStepView: ComposeStepView,\n    ComposeStepContentView: ComposeStepContentView\n}\n","var Pillar = require(\"pillar/pillar\"),\n    template = require(\"util/templating-util\"),\n    CommentListView = require(\"ui/js/_comment_list_view\");\n\nmodule.exports = CommentIconView;\n\nvar CommentIconView = Pillar.View.extend({\n    init: function(opts)\n    {\n        this.params = opts.params;\n        console.log(this.model);\n    },\n\n    events: {\n        \"click .js-show-comments\": \"showComments\"\n    },\n\n    showComments: function(e)\n    {\n        e.preventDefault();\n\n        var list = new CommentListView({params: {content_id: this.model.content}});\n        var el = list.render().el;\n\n        $(\"body\").append( el );\n        console.log(\"Comment List added\", el);\n    },\n\n    template: Pillar.template(\"comment_icon\"),\n\n    draw: function(opts)\n    {\n        var data = this.model.toJSON();\n        var html = Mustache.render(this.template, data);\n        this.replaceElement(html);\n    }\n});\n\nmodule.exports = CommentIconView;\n","var Pillar = require(\"pillar/pillar\"),\n    animate = require(\"util/animate-util\");\n\nmodule.exports = Pillar.View.extend({\n    init: function(opts)\n    {\n        opts = opts || {};\n        this.params = opts.params || {};\n    },\n\n    events: {\n        \"click .js-close-comments\": \"closeComments\",\n        \"click .comment-frame\": \"test\"\n    },\n\n    template: Pillar.template(\"comment_list\"),\n\n    closeComments: function(e)\n    {\n        e.preventDefault();\n        console.log(\"woo\");\n        animate.animateElement(this.$el, \"fadeOutDown\", this.fadeOut, this);\n    },\n\n    fadeOut: function($el, context)\n    {\n        context.remove();\n    },\n\n    getData: function()\n    {\n        return {};\n    },\n\n    draw: function(opts)\n    {\n        var data = this.getData();\n        data.content_id = this.params.content_id;\n        data.shared_image_id = this.$el.attr(\"data-shared-image\");\n\n        var html = Mustache.render(this.template, data);\n        this.replaceElement(html);\n\n        this.$el.css(\"display\", \"block\");\n        animate.animateElement(this.$el, \"fadeInUp\", null);\n    }\n});\n","var util = require(\"util/_util\");\n\nvar SortableItem = Backbone.Model.extend({\n    defaults: {\n        title: \"\",\n        field_name: \"\",\n        id: \"\",\n        link: \"#\",\n        cssClass: \"\"\n    },\n\n    initialize: function(attrs, opts)\n    {\n        this.set({id: util.getId(attrs)});\n    }\n});\n\nvar SortableItemCollection = Backbone.Collection.extend({\n    model: SortableItem\n});\n\nmodule.exports = {\n    SortableItem: SortableItem,\n    SortableItemCollection: SortableItemCollection\n};\n","var SortableItem = require(\"ui/js/_sortable_content_list_entry_model\").SortableItem;\nvar Pillar = require(\"pillar/pillar\");\nvar template = require(\"util/templating-util\");\n\nvar SortableItemView = Pillar.View.extend({\n    init: function(opts)\n    {\n        this.params = opts.params;\n        this.model.on(\"change\", this.render, this);\n    },\n\n    events: {\n        \"click .js-sortable-delete-link\": \"deleteSelf\"\n    },\n\n    template: template.templateHtml(\"sortable_content_list_entry\"),\n\n    cssClass: function()\n    {\n        return this.model.get(\"active\") ? \"active\" : \"\";\n    },\n\n    draw: function(opts)\n    {\n        var data = this.model.toJSON();\n        data.cssClass = this.cssClass();\n        var html = Mustache.render(this.template, this.model.toJSON());\n        this.replaceElement(html);\n    },\n\n    deleteSelf: function(e)\n    {\n        e.preventDefault();\n        this.model.collection.remove(this.model);\n    }\n});\n\nvar SortableItemListView = Pillar.CollectionView.extend({\n    init: function(opts) {\n        this.$el.find(\".js-sortable\").sortable({});\n\n        this.$readSelectionFrom = $(this.el).find(\".js-select2\");\n        this.hiddenFieldName = opts.hiddenFieldName;\n        this.$targetList = this.$el.find(opts.targetList);\n\n        this.collection.on('reset add remove', this.render, this);\n\n        this.render();\n    },\n\n    events: {\n        \"click .js-sortable-add-new\": \"addEntry\",\n        \"click .js-sortable-create-new\": \"newStepModal\",\n    },\n\n    afterDraw: function()\n    {\n        this.$el.find(\".loading\").remove();\n    },\n\n    drawCollection: function(model)\n    {\n        model.set({field_name: this.hiddenFieldName})\n        var itemView = new SortableItemView({model: model});\n        this.views.push( itemView );\n        this.$targetList.append(itemView.render().el);\n    },\n\n    newStepModal: function(e)\n    {\n        e.preventDefault();\n\n        var view = new NewStepModalView({});\n        $(\"body\").append(view.render().el);\n        view.showModal();\n    },\n\n    addEntry: function(e)\n    {\n        e.preventDefault();\n\n        var model = new SortableItem({\n            \"title\": this.$readSelectionFrom.find('option:selected').text(),\n            \"field_name\": this.hiddenFieldName,\n            \"id\": this.$readSelectionFrom.val()\n        });\n\n        this.collection.add( model );\n    },\n});\n\nmodule.exports = {\n    SortableItemView: SortableItemView,\n    SortableItemListView: SortableItemListView\n};\n","var aceUtil = new function()\n{\n    this.convertTextAreas = function(selector) {\n\n        var $el;\n\n        if (typeof selector == \"string\") {\n            $el = $(selector);\n        } else {\n            $el = selector;\n        }\n\n        $el.find('[data-editor]').each(function () {\n            var el = $(this);\n\n            if (el.prev().is(\".ace_editor\"))\n            {\n                console.log(\"Already an ace editor\");\n                return;\n            }\n\n            var mode = el.data('editor');\n\n            var editDiv = $('<div>', {\n                position: 'absolute',\n                width: el.width(),\n                height: Math.max(64, el[0].scrollHeight),\n                'class': el.attr('class')\n            }).insertBefore(el);\n\n            el.css('display', 'none');\n\n            var editor = ace.edit(editDiv[0]);\n\n            editor.getSession().setValue(el.text());\n            editor.getSession().setMode(\"ace/mode/\" + mode);\n            editor.getSession().setUseSoftTabs(false);\n            editor.getSession().setUseWrapMode(true);\n            editor.setTheme(\"ace/theme/terminal\");\n\n            editor.getSession().on('change', function(e) {\n                el.text(editor.getSession().getValue());\n            });\n\n        });\n\n    }\n\n}\n\nmodule.exports = aceUtil;\n\n\n\n\n","var util = require(\"util/_util\");\n\nvar AjaxFormView = Backbone.View.extend({\n    initialize: function(opts)\n    {\n        this.ajaxForm();\n        this.refreshPage = false;\n\n        if ( util.defined(opts) )\n        {\n            if ('success' in opts)\n            {\n                this.success = opts.success;\n            } else {\n                this.success = this.defaultSuccess;\n            }\n\n            if ('failure' in opts)\n            {\n                this.failure = opts.failure;\n            } else {\n                this.failure = this.defaultFailure;\n            }\n\n            if ('beforeSubmit' in opts)\n            {\n                this.beforeSubmit = opts.beforeSubmit;\n            } else {\n                this.beforeSubmit = this.defaultBeforeSubmit;\n            }\n\n            if ('refreshPage' in opts)\n            {\n                this.refreshPage = opts.refreshPage;\n            }\n        }\n\n    },\n\n    defaultBeforeSubmit: function(data, $form, options)\n    {\n\n    },\n\n    defaultSuccess: function(data, text, xhr, $form)\n    {\n        if (data.success)\n        {\n            console.log(\"Form submission returned success\");\n            if (this.refreshPage)\n            {\n                console.log(\"Refreshing page.\");\n                window.location.reload();\n            }\n        } else {\n            console.error(\"Form submission returned failure\");\n        }\n    },\n\n    defaultFailure: function(data, text, xhr, $form)\n    {\n        console.error(\"Form submission failed\");\n    },\n\n    ajaxForm: function()\n    {\n        var that = this;\n        this.$el.ajaxForm({\n            beforeSubmit:  function (data, $form, options) {\n                that.beforeSubmit(data, $form, options);\n            },\n            success: function (data, text, xhr, $form) {\n                that.success(data, text, xhr, $form);\n            },\n            error: function (data, text, xhr, $form) {\n                that.failure(data, text, xhr, $form);\n            }\n        });\n    }\n});\n\nmodule.exports = AjaxFormView;\n","function run()\n{\n    _.templateSettings = {\n        interpolate: /\\%\\%=(.+?)\\%\\%/g,\n        escape: /\\%\\%-(.+?)\\%\\%/g,\n        evaluate: /\\%\\%(.+?)\\%\\%/g,\n    };\n}\n\nmodule.exports = run;\n","// bootstrap-mod.js alters some bootstrap UI animations\n\nfunction boostrapMods()\n{\n    $('[rel=tooltip]').tooltip();\n    $('[rel=popover]').popover();\n    $('[rel=popover]').click( function (e) { e.preventDefault(); } );\n    $('[rel=popover][data-trigger=hover]').off(\"click\");\n\n    // ADD SLIDEDOWN ANIMATION TO DROPDOWN //\n    $('.dropdown').on('show.bs.dropdown', function(e){\n        $(this).find('.dropdown-menu').first().stop(true, true).slideDown(100);\n    });\n\n    // ADD SLIDEUP ANIMATION TO DROPDOWN //\n    $('.dropdown').on('hide.bs.dropdown', function(e){\n        $(this).find('.dropdown-menu').first().stop(true, true).slideUp(100);\n    });\n\n    $(\".dropdown-toggle\").click( function(e) {\n        e.preventDefault();\n    });\n}\n\nmodule.exports = boostrapMods;\n","var eventUtil = require(\"util/event-util\"),\n    util = require(\"util/_util\"),\n    animate = require(\"util/animate-util\");\n\n// comments.js powers the comment frame for articles and images\nvar comments = new function()\n{\n    var self = this;\n\n    self.bindComments = function()\n    {\n        console.log(\"BINDING COMMENTS\");\n        var id = \"#comment_frame\";\n        var $frame = $(id);\n\n        $(\".step-body .comment, .shared-wrapper .comment\").each( function() {\n\n            var $comment = $(this);\n            // Almost always the column content resides in\n            var $parent = $(this).parent().parent().parent().parent();\n            // This will be a .hideable-inner in an edge case\n            var $otherParent = $(this).parent().parent().parent();\n            var $sibling = $(this).prev();\n\n            $(this).find('a').on(\"touchstart, click\", function (e) {\n\n                e.preventDefault();\n\n                eventUtil.stopEventPropagating(e);\n\n                // Do not interrupt a transition\n                if (!$(\"#comment_frame\").hasClass(\"animated\"))\n                {\n\n                    $comment.append(loadingIndicator);\n\n                    var url = \"\";\n                    var offsetLeft, offsetTop;\n\n                    if ($parent.attr(\"id\") == \"sharing_lightbox\")\n                    {\n                        url = \"/comments/image-get/\" + $parent.attr(\"data-id\");\n                        offsetLeft = -160;\n                        offsetTop = \"auto\";\n                    } else {\n                        var currentStep = window.location.href.substr(window.location.href.lastIndexOf('/') + 1);\n                        currentStep = currentStep.split(\"#\")[0];\n                        currentStep = currentStep.split(\"?\")[0];\n\n                        url = \"/comments/get/\" + currentStep + \"/\" + $(this).parent().attr(\"data-group\");\n\n                        offsetLeft = 32;\n                        offsetTop = -64;\n                    }\n\n                    $.ajax({\n                        url: url,\n                        success: function (data) {\n                            if (data.success)\n                            {\n                                $frame.html(data.html);\n                                self.showCommentFrame(id, $frame, $comment, offsetLeft, offsetTop);\n                            }\n\n                            $comment.children().last().remove();\n                        },\n                        timeout: 3000,\n                        dataType: 'json',\n                        error: function(data) {\n                            $frame.html(\"Could not load comments.\");\n                            self.showCommentFrame(id, $frame, $comment, offsetLeft, offsetTop);\n                            $comment.children().last().remove();\n                        }\n                    });\n\n                }\n\n            } );\n\n        } );\n\n        $('html').on( \"touchstart, click\", function (e) {\n\n            if ( eventUtil.eventTargetDoesNotInclude(e, '#comment_frame') )\n            {\n                if (!$frame.hasClass(\"animated\") && $frame.css(\"display\") == \"block\")\n                {\n                    animate.animate(id, 'fadeOutUp', function() { $frame.css(\"display\", \"none\"); });\n                }\n            }\n        });\n    }\n\n    self.showCommentFrame = function(id, $frame, $comment, offsetLeft, offsetTop)\n    {\n\n        var autoOffset = (offsetTop == \"auto\");\n\n        if (!offsetLeft) offsetLeft = 32;\n        if (!offsetTop) offsetTop = -64;\n\n        $frame.css(\"display\", \"block\");\n\n        if (util.findBootstrapEnvironment() == \"ExtraSmall\")\n        {\n            // Centre the display on mobiles\n            $frame.offset({ left: getViewportWidth() / 2 - $frame.outerWidth() / 2, top: $comment.offset().top + offsetTop});\n        } else {\n\n            // Stop comments panel sticking off the right side of the display\n            if ($comment.offset().left + offsetLeft + $frame.outerWidth() >= util.getViewportWidth())\n            {\n                $frame.offset({ left: getViewportWidth() - $frame.outerWidth() - 10, top: $comment.offset().top + offsetTop});\n            } else {\n                // Just display it normally\n                $frame.offset({ left: $comment.offset().left + offsetLeft, top: $comment.offset().top + offsetTop});\n            }\n\n\n        }\n\n\n\n        animate.animate(id, 'fadeInDown', null);\n\n        $(\"form#Comment\").off();\n\n        $(\"form#Comment\").ajaxForm({\n            beforeSubmit:  function () {\n                $frame.find(\".errors\").text(\"\");\n                $(\"form#Comment\").find('input[type=\"submit\"]').attr(\"disabled\", \"disabled\");\n            },\n            success: function (data) {\n                if (data.success)\n                {\n                    $frame.html(data.html);\n                } else {\n                    appendErrors(data.errors, $frame, \".errors\");\n                }\n\n                $(\"form#Comment\").find('input[type=\"submit\"]').attr(\"disabled\", false);\n            },\n            error: function (data) {\n                $frame.find(\".errors\").append(\"Could not post comment, try again?\");\n                $(\"form#Comment\").find('input[type=\"submit\"]').attr(\"disabled\", false);\n            }\n        });\n\n        if (autoOffset)\n        {\n            $frame.offset({top: $comment.offset().top - $frame.height() - 32});\n        }\n\n\n        $(\".js-close-comments\").click( function(e) {\n            e.preventDefault();\n\n            animate.animate(id, 'fadeOutUp', function() { $frame.css(\"display\", \"none\"); });\n\n        });\n\n        $(\".js-delete-comment\").bind('click', function (e) {\n\n            e.preventDefault();\n\n            if (confirm(\"Delete this comment?\"))\n            {\n                var $commentEntry = $(this).parent().parent();\n\n                $.get( $(this).attr(\"href\") )\n                    .done( function(data) {\n                        if (data.success)\n                        {\n                            $commentEntry.remove();\n                        }\n                    })\n                    .fail( function(data) {\n\n                    });\n            }\n        });\n\n        $(\".js-report-comment\").bind('click', function (e) {\n\n            e.preventDefault();\n\n            if (confirm(\"Report this comment?\"))\n            {\n                $.get( $(this).attr(\"href\") )\n                    .done( function(data) {\n                        if (data.success)\n                        {\n                            alert(\"Comment reported, thanks!\");\n                        } else {\n                            alert(\"Comment already reported.\")\n                        }\n                    })\n                    .fail( function(data) {\n\n                    });\n            }\n        });\n    }\n}\n\nmodule.exports = comments;\n","var animate = require(\"util/animate-util\");\n\n// definitions.js handle definition lookups\n\nvar definitions = new function()\n{\n    var self = this;\n\n    self.convertDefinitionLinks = function()\n    {\n        $('a[href^=\"define:\"]').each( function () {\n            $(this).attr(\"rel\", \"definition\");\n\n            var query = $(this).attr(\"href\").replace(\"define:\", \"\");\n\n            $(this).attr(\"data-query\", query);\n        });\n    }\n\n    self.bindDefinitions = function()\n    {\n        $(\"a[rel='definition']\").click( function(e) {\n            var $definition = $(this);\n\n            e.preventDefault();\n\n            var query = $(this).attr(\"data-query\");\n\n            $definition.after(loadingIndicator);\n\n            $.ajax({\n                url: \"/definitions/define/\" + query,\n                success: function (data) {\n                    if (data != \"null\" && data != null)\n                    {\n                        $(\".step-body .js-inserted-definition\").remove();\n\n                        var model = {\n                            title: data.title,\n                            body: marked(data.body),\n                            id: data._id[\"$oid\"]\n                        };\n\n                        var html = Mustache.render(templateHtml(\"inserted_definition\"), model);\n\n                        $definition.parent().after(html);\n                        animate.animate($definition.parent().next(), \"fadeInUp\");\n\n                        if (mathjax) MathJax.Hub.Queue([\"Typeset\", MathJax.Hub, $definition.parent().next()[0]]);\n\n                        $(\".js-close-inserted-definition\").click( function(e) {\n                            e.preventDefault();\n\n                            animate.animate($(this).parent(), \"fadeOutDown\", function($el) { $el.remove(); });\n                        });\n\n                    }\n\n                    $definition.next().remove();\n                },\n                timeout: 3000,\n                dataType: 'json',\n                error: function(data) {\n                    $definition.next().remove();\n                    console.log(\"Could not load definition.\");\n                }\n            });\n        });\n\n        $(\".js-insert-definition\").click( function(e) {\n            e.preventDefault();\n\n            var html = '{definition{\"TITLE\", \"TERM\"}}';\n            prompt(\"Macro:\", html);\n\n            editor.focus();\n        });\n\n        $(\".js-insert-inline-definition\").click( function(e) {\n            e.preventDefault();\n\n            var html = '{inline-definition{\"TERM\"}}';\n            prompt(\"Macro:\", html);\n\n            editor.focus();\n        });\n\n        $(\".js-insert-inline-tex\").click( function(e) {\n            e.preventDefault();\n\n            var html = \"\\\\\\\\( \\\\\\\\)\";\n            prompt(\"Tex:\", html);\n\n            editor.focus();\n        });\n\n        $(\".js-insert-block-tex\").click( function(e) {\n            e.preventDefault();\n\n            var html = \"\\\\\\\\[ \\\\\\\\]\";\n            prompt(\"Tex:\", html);\n\n            editor.focus();\n        });\n\n        $(\".js-insert-two-cols\").click( function(e) {\n            e.preventDefault();\n\n            var html = '{two-columns{\"one\", \"two\"}}';\n            prompt(\"Macro:\", html);\n\n            editor.focus();\n        });\n\n        $(\".js-insert-one-col\").click( function(e) {\n            e.preventDefault();\n\n            var html = '{one-column{\"content\"}}';\n            prompt(\"Macro:\", html);\n\n            editor.focus();\n        });\n    }\n}\n\nmodule.exports = definitions;\n","// hideable-region.js\n\nvar hideable = new function()\n{\n    var self = this;\n    self.createHideableRegions = function()\n    {\n        $(\".hideable-inner\").each( function () {\n\n            var $contentBlock = $(this).closest(\".content-block\");\n            var $content = $contentBlock.next();\n\n            $content.css(\"visibility\", \"hidden\");\n        });\n\n        $(\".js-toggle-hideable\").click( function(e) {\n            e.preventDefault();\n\n            var $contentBlock = $(this).closest(\".content-block\");\n            var $content = $contentBlock.next();\n\n            if (isVisible($content))\n            {\n                $(this).text(\"Expand\");\n                animateElement( $content, \"fadeOutLeftBig\", function ($elem) { $elem.css(\"visibility\", \"hidden\"); } );\n            } else {\n                $(this).text(\"Hide\");\n                $content.css(\"visibility\", \"visible\");\n                animateElement( $content, \"fadeInLeftBig\" );\n            }\n\n\n        });\n    }\n\n    self.bindInsertRegionButton = function()\n    {\n        $(\".js-insert-hideable\").click( function(e) {\n            e.preventDefault();\n\n            var html = '{hideable{TITLE, CONTENT}}';\n            prompt(\"Macro:\", html);\n\n            editor.focus();\n        });\n    }\n}\n\nmodule.exports = hideable;\n\n","// learn.js modifies the learn page layout to inject images etc.\n\nvar learn = new function()\n{\n    var self = this;\n\n    self.setup = function()\n    {\n        $(\".banner-image\").each( function() {\n            var $this = $(this);\n\n            var bg = $this.attr(\"data-background\");\n\n            if (bg && bg != \"\" && bg[0] != '#')\n            {\n                $this.css(\"background-image\", \"url(\" + bg + \")\");\n            } else if (bg && bg != \"\")\n            {\n                $this.css(\"background-color\", bg);\n            }\n        });\n\n        $(\"[data-bg]\").each( function() {\n            $(this).css(\"background-color\", $(this).attr(\"data-bg\"));\n        });\n\n        $(\"[data-colour]\").each( function() {\n            $(this).css(\"color\", $(this).attr(\"data-colour\"));\n        });\n\n        if (jQuery().lazyload)\n        {\n            $(\".step-body img\").lazyload(\n            {\n                threshold : 200,\n                load: self.lazyLoadHandler\n            });\n        } else {\n            $(\".step-body img\").each( function()\n            {\n                $(this).attr(\"src\", $(this).attr(\"data-original\"));\n            });\n        }\n    }\n\n    // Add the intense viewer to the images\n    self.lazyLoadHandler = function()\n    {\n        $(this).attr(\"data-caption\", $(this).attr(\"alt\"));\n        $(this).addClass(\"plus-cursor\");\n        Intense( this );\n    }\n}\n\nmodule.exports = learn;\n","function run()\n{\n    window.loadingIndicator = '<div class=\"spinner\"><div class=\"bounce1\"></div><div class=\"bounce2\"></div><div class=\"bounce3\"></div></div>';\n}\n\nmodule.exports = run;\n","var AjaxFormView = require(\"backbone/ajax_view\");\n\nfunction run(opts)\n{\n    new AjaxFormView({el: $(\"#addCourseForm\"), refreshPage: true});\n}\n\nmodule.exports = {run: run};\n","var aceUtil = require(\"ace\");\n\nfunction run(opts)\n{\n    aceUtil.convertTextAreas(opts.selector);\n}\n\nmodule.exports = {run: run};\n","var SortableItemListView = require(\"ui/js/_sortable_content_list_entry_view\").SortableItemListView,\n    SortableItem = require(\"ui/js/_sortable_content_list_entry_model\").SortableItem,\n    SortableItemCollection = require(\"ui/js/_sortable_content_list_entry_model\").SortableItemCollection;\n\nvar models = require(\"ui/js/_sortable_content_list_entry_model\");\n\nfunction run(opts)\n{\n    var lessonCollection = new SortableItemCollection();\n\n    _.each(window.doublejump.lessonListForCurrentCourse, function(model)\n    {\n        var model = new SortableItem({\n            id: model[\"_id\"][\"$oid\"],\n            title: model.title,\n            link: window.doublejump.urlBase + model[\"_id\"][\"$oid\"]\n        });\n\n        lessonCollection.add(model);\n    });\n\n    new SortableItemListView({\n        el: $(\"#lessons_sortable_list\"),\n        hiddenFieldName: 'course[lessons][]',\n        targetList: '#lessons',\n        collection: lessonCollection\n    });\n}\n\nmodule.exports = {run: run};\n","var AjaxFormView = require(\"backbone/ajax_view\");\nvar ComposeStepView = require(\"editor/step_view\").ComposeStepView;\nvar ComposeStepContentView = require(\"editor/step_view\").ComposeStepContentView;\n\nfunction run()\n{\n    new AjaxFormView({\n        el: $(\"#updateStepOrderForm\")\n    });\n\n    var composeStepView = new ComposeStepView({el: $(\".create-step-form\")});\n\n    $(\".content\").each( function() {\n        console.log($(this));\n        new ComposeStepContentView({el: $(this), parent: composeStepView});\n    });\n\n    $(\".js-save-step\").click( function (e)\n    {\n        e.preventDefault();\n\n        $(\"#updateStepOrderForm\").submit();\n        composeStepView.beginSubmits();\n    });\n}\n\nmodule.exports = {run: run};\n","var comments = require(\"comments\");\nvar sortable = require(\"sortable-list\");\n\nvar EditorCourseList = new function()\n{\n    this.run = function(opts)\n    {\n        sortable.bindSortableLists({itemSelector: \"li\"});\n    }\n};\n\nmodule.exports = EditorCourseList;\n","var iconTab = require(\"ui/icon-tab\");\n\nfunction run(opts)\n{\n    iconTab.init();\n}\n\nmodule.exports = {run: run};\n","require(\"mixins/editor_course_list\");\nrequire(\"mixins/payment_details\");\nrequire(\"mixins/progress_bars\");\nrequire(\"mixins/sharing\");\nrequire(\"mixins/course_edit_page\");\nrequire(\"mixins/sortable_item_list\");\nrequire(\"mixins/ajax_form\");\nrequire(\"mixins/icon_tab\");\nrequire(\"mixins/edit_step\");\nrequire(\"mixins/convert_ace\");\nrequire(\"mixins/step_list\");\n\nvar MixinController = new function()\n{\n    this.intialiseControllers = function()\n    {\n        $(\"[data-mixin]\").each( function() {\n            var controller = require($(this).attr(\"data-mixin\")).run($(this).data());\n        });\n    }\n}\n\nmodule.exports = MixinController;\n","var payment = require(\"payment_validation\");\n\nvar PaymentDetails = new function()\n{\n    this.run = function(opts)\n    {\n        payment.init();\n    }\n}\n\nmodule.exports = PaymentDetails;\n","var progress = require(\"progress-bar\");\n\nvar ProgressBars = new function()\n{\n    this.run = function(opts)\n    {\n        progress.initHorizontalBars();\n        progress.bindProgressBarResize();\n        progress.initVerticalBars();\n    }\n};\n\nmodule.exports = ProgressBars;\n","var sharing = require(\"sharing-progress\");\n\nfunction run(opts)\n{\n    sharing.bindImageClick();\n    sharing.bindSharingImageForm();\n    sharing.bindPageResize();\n    sharing.bindLikeImage();\n}\n\nmodule.exports = {run: run};\n","var SortableItemCollection = require(\"ui/js/_sortable_content_list_entry_model\").SortableItemCollection,\n    SortableItemListView = require(\"ui/js/_sortable_content_list_entry_view\").SortableItemListView;\n\nfunction run(opts)\n{\n    var list = new SortableItemListView({\n        el: $(opts.selector),\n        hiddenFieldName: opts.hiddenFieldName,\n        targetList: opts.targetList,\n        collection: new SortableItemCollection(window.doublejump[opts.data])\n    });\n}\n\nmodule.exports = {run: run};\n","var SortableItemListView = require(\"ui/js/_sortable_content_list_entry_view\").SortableItemListView,\n    SortableItem = require(\"ui/js/_sortable_content_list_entry_model\").SortableItem,\n    SortableItemCollection = require(\"ui/js/_sortable_content_list_entry_model\").SortableItemCollection;\n\nfunction run(opts)\n{\n    var collection = new SortableItemCollection();\n\n    console.log(window.doublejump.stepListForCurrentLesson);\n\n    $(function() {\n        _.each(window.doublejump.stepListForCurrentLesson, function(model)\n        {\n            var id = model[\"_id\"][\"$oid\"];\n            var active = false;\n\n            if (id == window.doublejump.currentStep)\n            {\n                active = true;\n            }\n\n            var model = new SortableItem({\n                id: id,\n                title: model.title,\n                link: window.doublejump.urlBase + id,\n                active: active\n            });\n\n            collection.add(model);\n        });\n\n        new SortableItemListView({\n            el: $(\"#steps_sortable_list\"),\n            hiddenFieldName: 'lesson[steps][]',\n            targetList: '#steps',\n            collection: collection\n        });\n    });\n}\n\nmodule.exports = {run: run};\n","require(\"ui/js/_comment_icon_view\");\n\nfunction run()\n{\n    $(\"[data-view-model]\").each( function() {\n        var vm = $(this).attr(\"data-view-model\");\n        $(this).removeAttr(\"data-view-model\");\n\n        new (require(vm))({el: $(this), model: new Backbone.Model($(this).data()) });\n\n\n    });\n}\n\nmodule.exports = run;\n","// notifications.js\n\nvar notifications = new function()\n{\n    var self = this;\n\n    self.bindRemoveLinks = function ()\n    {\n        $(\".remove-notification\").click( function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            var $menu = $( this ).closest(\".dropdown-menu\");\n            console.log($menu);\n\n            var $li = $( this ).closest(\"li\");\n\n            $.postWithCsrf(\"/notifications/remove/\" + $li.attr(\"data-id\"), {}, function (data) {\n                if (!data.success)\n                {\n                    console.error(\"Notification \" + $li.attr(\"data-id\") + \" could not be removed.\");\n                }\n            })\n\n            $li.remove();\n\n            // Decrement the number of remaining notifications\n            $( \".notification-badge\" ).text(parseInt($( \".notification-badge\" ).text()) - 1);\n\n            // Remove the whole menu if there are none left\n            if ($menu.children().length == 0)\n            {\n                $menu.remove();\n                $( \".notifications\" ).remove();\n            }\n        });\n    };\n}\n\nmodule.exports = notifications;\n","var paymentValidation = new function()\n{\n    this.init = function init()\n    {\n        if (typeof Stripe == \"undefined\" || typeof jQuery.payment == \"undefined\")\n        {\n            console.error(\"Payment Validation has a hard dependency on the Stripe API and the jQuery Payment Plugin.\");\n            return;\n        }\n\n        Stripe.setPublishableKey(\"pk_test_90Yk2QxvQRPpw2T5qEQtyvoP\");\n\n        $('#cc_num').payment('formatCardNumber');\n        $('#cc_cvc').payment('formatCardCVC');\n        $('#cc_expire').payment('formatCardExpiry');\n\n        $(\"#cc_expire\").keyup( function() {\n            var expiry = $(this).payment('cardExpiryVal');\n\n            $(\"#cc_exp_month\").val(expiry.month);\n            $(\"#cc_exp_year\").val(expiry.year);\n        });\n\n        $('#editAccountSettingsForm').submit(function(event) {\n            var $form = $(this);\n\n            // Disable the submit button to prevent repeated clicks\n            $form.find('button').prop('disabled', true);\n\n            Stripe.card.createToken($form, stripeResponseHandler);\n\n            // Prevent the form from submitting with the default action\n            return false;\n        });\n\n        function stripeResponseHandler(status, response) {\n            var $form = $('#editAccountSettingsForm');\n\n            if (response.error) {\n                // Show the errors on the form\n                $form.find('.payment-errors').text(response.error.message);\n                $form.find('button').prop('disabled', false);\n            } else {\n                // response contains id and card, which contains additional card details\n                var token = response.id;\n                // Insert the token into the form so it gets submitted to the server\n                $form.append($('<input type=\"hidden\" name=\"stripeToken\" />').val(token));\n                // and submit\n                $form.get(0).submit();\n            }\n        };\n    }\n}\n\nmodule.exports = paymentValidation;\n","Pillar = {} || Pillar;\n\nPillar.superOf = function(clazz)\n{\n    return clazz.constructor.__super__;\n}\n\nPillar.extendEvents = function(view) {\n    view.events = _.extend({}, Pillar.superOf(view).events, view.events);\n}\n\nPillar.template = function(name)\n{\n    return $(\"[data-template='\" + name + \"']\").html();\n}\n\nPillar.Templates = {\n    templates: {},\n\n    register: function(name, html)\n    {\n        this.templates[name] = html;\n    },\n\n    get: function(name)\n    {\n        return this.templates[name];\n    },\n\n    smartRegister: function(name)\n    {\n        this.register(name, Pillar.Templates.template( $(\"#_\" + name + \"_template\").html() ));\n    },\n\n    evalIfFunction: function(obj, attr)\n    {\n        if (typeof obj[attr] == \"function\")\n        {\n            return obj[attr]();\n        } else if (typeof obj[attr] != \"undefined\")\n        {\n            return obj[attr];\n        } else if (typeof obj.get == \"function\" && typeof obj.get(attr) != \"undefined\")\n        {\n            return obj.get(attr);\n        } else {\n            return \"\";\n        }\n    },\n\n    getPlaceholder: function(string)\n    {\n        return \"{{\"+string+\"}}\";\n    },\n\n    // TODO: optimisation where we return a function from there, that concats string fragments and an attrs object using .join\n    // Need to split final HTML string at {{tokens}};\n    compileTemplate: function($template)\n    {\n        var $html = $template.clone();\n        var $elems = $html.find(\"[data-pillar]\").toArray();\n\n        if (typeof $html.attr(\"data-pillar\") != \"undefined\")\n        {\n            $elems.unshift($html);\n        }\n\n        _.each($elems, function(elem)\n        {\n            var $el = $(elem);\n            var links = $el.attr(\"data-pillar\");\n            var toLink = links.split(\",\");\n\n            $.each(toLink, function(index, property)\n            {\n                var trimmed = property.trim();\n                var splitTerm = trimmed.split(\"<-\");\n                var attr = splitTerm[0];\n                var valueName = splitTerm[1];\n\n                var specialAttrs = {\n                    \"extraClass\": function($el) {\n                        $el.addClass(Pillar.Templates.getPlaceholder(valueName));\n                    },\n                    \"visible\": function($el) {\n                        $el.attr(\"data-visible\", Pillar.Templates.getPlaceholder(valueName));\n                    },\n                    \"hidden\": function($el) {\n                        $el.attr(\"data-hidden\", Pillar.Templates.getPlaceholder(valueName));\n                    },\n                    \"text\": function($el) {\n                        $el.html(Pillar.Templates.getPlaceholder(valueName));\n                    }\n                };\n\n                if (attr in specialAttrs)\n                {\n                    specialAttrs[attr]($el);\n                } else {\n                    $el.attr(attr, Pillar.Templates.getPlaceholder(valueName));\n                }\n            });\n\n            $el.removeAttr(\"data-pillar\");\n            $el.attr(\"data-pillar-rendered\", true);\n        });\n\n        var finalString = $html.clone().wrap(\"<div/>\").parent().html();\n\n        var reNoGroup = /\\{\\{[^}}]+\\}\\}/g;\n        var re = /\\{\\{([^}}]+)\\}\\}/g;\n        var parts = finalString.split(reNoGroup);\n        var matches = finalString.match(re);\n\n        var f = function (attrs)\n        {\n            var sBuild = [];\n            // console.log(parts);\n            for (var i = 0; i < parts.length; i++)\n            {\n                sBuild.push(parts[i]);\n                if (i < matches.length)\n                {\n                    var cleanMatchName = matches[i].replace(\"{{\", \"\").replace(\"}}\", \"\");\n                    // console.log(matches[i], Pillar.Templates.evalIfFunction(attrs, cleanMatchName));\n                    sBuild.push(Pillar.Templates.evalIfFunction(attrs, cleanMatchName));\n                }\n            }\n\n            return sBuild.join(\"\")\n        }\n\n        return f;\n    },\n\n    template: function(html)\n    {\n        return this.compileTemplate($(html));\n    },\n\n    renderTemplate: function(template, attrs)\n    {\n        return template(attrs);\n    }\n}\n\nPillar.View = Backbone.View.extend({\n    initialize: function(opts)\n    {\n        Pillar.superOf(this).initialize(opts);\n        Pillar.extendEvents(this);\n\n        if (opts)\n        {\n            if (\"template\" in opts)\n            {\n                this.template = opts.template;\n            }\n        }\n\n        this.init(opts);\n    },\n\n    replaceElement: function(html)\n    {\n        var $oldEl = this.$el;\n        this.setElement(html);\n        $oldEl.replaceWith(this.$el);\n    },\n\n    defaultDraw: function()\n    {\n        var data = {};\n        if (this.model)\n        {\n            data = this.model.toJSON();\n        }\n        var html = Mustache.render(this.template, data);\n        this.replaceElement(html);\n    },\n\n    renderTemplate: Pillar.Templates.renderTemplate,\n\n    _super: function()\n    {\n        return Pillar.superOf(this).initialize(opts);\n    },\n\n    // init is called up the extension stack the way one might expect\n    init: function(opts)\n    {\n\n    },\n\n    // Render is wrapped to always return this, and provide easy hookins for before and\n    // after drawing\n    render: function()\n    {\n        this.beforeDraw();\n        this.draw();\n        this.afterDraw();\n\n        this.delegateEvents(this.events);\n\n        return this;\n    },\n\n    draw: function() {},\n    beforeDraw: function() {},\n    afterDraw: function() {}\n});\n\nPillar.CollectionView = Pillar.View.extend({\n    init: function(opts)\n    {\n        this.views = [];\n    },\n\n    // Remove all existing views from the collection view,\n    // since we are about to redraw all of the child views.\n    beforeDraw: function()\n    {\n        _.each(this.views, function(view)\n        {\n            view.remove();\n        });\n\n        this.views = [];\n    },\n\n    // Iterate over all models in the collection, drawing each individual model.\n    // Shortcut for manually looping over the models.\n    // If more control is needed, override draw and this will not be called.\n    drawCollection: function(model)\n    {\n\n    },\n\n    draw: function()\n    {\n        this.collection.each(this.drawCollection, this);\n    }\n});\n\nPillar.BaseTestView = Pillar.View.extend({\n\n    init: function(opts)\n    {\n        console.log(\"Base INIT\");\n    },\n\n    events: {\n        \"click\": \"helloWorld\"\n    },\n\n    helloWorld: function(e)\n    {\n        console.log(\"Hello World\");\n    }\n});\n\nPillar.TestView = Pillar.BaseTestView.extend({\n\n    init: function(opts)\n    {\n        console.log(\"INIT\");\n    },\n\n    events: {\n        \"click .all\": \"whatUp\"\n    },\n\n    whatUp: function(e)\n    {\n        console.log(\"What Up!\");\n    }\n});\n\nPillar.ExtendedTextView = Pillar.TestView.extend({\n    init: function(opts)\n    {\n        console.log(\"Child INIT\");\n    }\n});\n\nmodule.exports = Pillar;\n","// progress-bar.js powers the progress bar during a lesson\n\nvar util = require(\"util/_util\");\n\nvar progress = new function()\n{\n    var self = this;\n    self.updateProgressBars = function()\n    {\n        $(\".progress-list-wrapper .progress\").each(function() {\n\n            var\n            $this = $(this),\n            $parent = $(this).parent(),\n            $first = $parent.find(\"ul.progress-list li:first a\"),\n            $last = $parent.find(\"ul.progress-list li.current-step a\");\n\n            $(this).css(\"width\", $last.offset().left - $first.offset().left);\n            $(this).css(\"left\", $first.position().left + 2);\n            $(this).css(\"top\", $first.position().top);\n\n        } );\n\n        if ( $(\".course-progress-node\").length > 0 )\n        {\n            var nodes = self.getVerticalProgressPoints();\n\n            var\n            $first = nodes.first,\n            $upto = nodes.upto,\n            $last = nodes.last;\n            nodeWidth = $first.outerWidth() - 3;\n\n            var $doneBar = $(\".vertical-progress-done\");\n            $doneBar.css(\"height\", $upto.offset().top - $first.offset().top);\n            $doneBar.css(\"left\", $first.offset().left + nodeWidth / 2);\n            $doneBar.css(\"top\", $first.offset().top + nodeWidth / 2);\n\n            var $toDoBar = $(\".vertical-progress-todo\");\n            $toDoBar.css(\"height\", $last.offset().top - $upto.offset().top);\n            $toDoBar.css(\"left\", $upto.offset().left + nodeWidth / 2);\n            $toDoBar.css(\"top\", $upto.offset().top + nodeWidth / 2);\n        }\n    }\n\n\n    self.getVerticalProgressPoints = function()\n    {\n        var\n        $first = $(\".course-progress-node.first\"),\n        $upto = $(\".course-progress-node.done:last\"),\n        $last = $(\".course-progress-node:last\");\n\n        if ($upto.length == 0)\n        {\n            $upto = $first;\n        }\n\n        return {\"first\" : $first, \"upto\": $upto, \"last\": $last};\n    }\n\n\n    self.initVerticalBars = function()\n    {\n        if ( $(\".course-progress-node\").length > 0 )\n        {\n            $(\"body\").prepend(\"<div class='vertical-progress-done'></div>\");\n            $(\"body\").prepend(\"<div class='vertical-progress-todo'></div>\");\n\n            var $selector = $(\".course-progress-node\").not(\".done\").first().parent().next();\n\n            var href = $selector.find(\"a\").attr(\"href\");\n\n            $selector.find(\".box\").prepend(\"<a href='\" + href + \"' class='button create-button float-right lets-go'>Let's Go!</div>\");\n        }\n    }\n\n    self.initHorizontalBars = function()\n    {\n        $(\".progress-list-wrapper\").prepend(\"<div class='progress'></div>\");\n    }\n\n    self.bindProgressBarResize = function()\n    {\n        self.updateProgressBars();\n        window.setTimeout( self.updateProgressBars, 1000 );\n\n        if ($(\".course-progress-node\").length > 0)\n        {\n            window.setInterval( self.updateProgressBars, 100 );\n        }\n\n        $(window).resize( self.updateProgressBars );\n\n        // If we are running CSS animations, then we need to keep the progress bars up to date\n        if (util.supportsTransitions())\n        {\n            self.runBarUpdate();\n        }\n\n    }\n\n    self.barUpdateCount = 0;\n\n    self.runBarUpdate = function() {\n        self.barUpdateCount++;\n\n        // Only update 100 frames of animation\n        if (self.barUpdateCount < 100)\n        {\n            requestAnimationFrame(self.runBarUpdate);\n            self.updateProgressBars();\n        }\n    }\n}\n\nmodule.exports = progress;\n","var search = new function()\n{\n    var self = this;\n\n    self.searchTerm = \"\";\n    self.categoryFilter = \"\";\n\n    self.bindDefinitionSearchField = function()\n    {\n\n        $(\".js-definition-filter\").keyup( function() {\n\n            var searchTerm = $(this).val().toLowerCase();\n\n            $(\".definition-block\").each( function() {\n                var\n                definitionTerm = $(this).attr(\"data-definition-name\").toLowerCase(),\n                show = false;\n\n                if ( definitionTerm.indexOf(searchTerm) >= 0 || searchTerm.indexOf(definitionTerm) >= 0 )\n                {\n                    show = true;\n                }\n\n                if (show)\n                {\n                    $(this).parent().show();\n                } else {\n                    $(this).parent().hide();\n                }\n\n            });\n\n\n        });\n\n    }\n\n    self.bindCourseSearchField = function()\n    {\n\n        $(\".js-course-filter\").keyup( function() {\n\n            self.searchTerm = $(this).val().toLowerCase();\n\n            self.filterCourses(self.searchTerm, self.categoryFilter);\n\n\n        });\n\n        $(\".js-category-tag\").click( function() {\n\n            if ($(this).attr(\"data-selected\") != \"true\")\n            {\n                self.categoryFilter = $(this).attr(\"data-category\").toLowerCase();\n\n                $(\".js-category-tag\").each( function() {\n                    $(this).css(\"background-color\", $(this).attr(\"data-bg\"));\n                    $(this).attr(\"data-selected\", \"false\");\n                });\n\n                $(this).css(\"background-color\", $(this).attr(\"data-bg-selected\"));\n                $(this).attr(\"data-selected\", \"true\");\n\n\n            } else {\n                self.categoryFilter = \"\";\n                $(this).css(\"background-color\", $(this).attr(\"data-bg\"));\n                $(this).attr(\"data-selected\", \"false\");\n            }\n\n            self.filterCourses(self.searchTerm, self.categoryFilter);\n\n        });\n\n    }\n\n    self.filterCourses = function(searchTerm, categoryFilter)\n    {\n\n        $(\".course-block\").each( function() {\n            var\n            categoryName = $(this).attr(\"data-category-name\").toLowerCase(),\n            courseName = $(this).attr(\"data-course-name\").toLowerCase(),\n            show = false;\n\n            if (   courseName.indexOf(searchTerm) >= 0\n                || searchTerm.indexOf(courseName) >= 0\n                || categoryName.indexOf(searchTerm) >= 0\n                || searchTerm.indexOf(categoryName) >= 0)\n            {\n                show = true;\n            }\n\n            if ( categoryName.indexOf(categoryFilter) == -1 )\n            {\n                show = false;\n            }\n\n            if (show)\n            {\n                $(this).parent().show();\n            } else {\n                $(this).parent().hide();\n            }\n\n        });\n    }\n}\n\nmodule.exports = search;\n","// sharing-progress.js controls everything about the gallery sharing steps\n\nvar learn = require(\"learn\");\n\nvar sharing = new function()\n{\n    var $sharedImageForm = $(\"form#addSharedImageForm\");\n    var self = this;\n\n    self.bindSharingImageForm = function()\n    {\n        $sharedImageForm.ajaxForm({\n            beforeSubmit:  function () {\n                $sharedImageForm.find(\".errors\").text(\"\");\n                $sharedImageForm.find('input[type=\"submit\"]').attr(\"disabled\", \"disabled\");\n            },\n            success: function (data) {\n                if (data.success)\n                {\n                    if (data.refresh)\n                    {\n                        location.reload(true);\n                    }\n                } else {\n                    appendErrors(data.errors, $sharedImageForm, \".errors\");\n                }\n\n                $sharedImageForm.find('input[type=\"submit\"]').attr(\"disabled\", false);\n            },\n            error: function (data) {\n                $sharedImageForm.find(\".errors\").append(\"Could not share image, try again?\");\n                $sharedImageForm.find('input[type=\"submit\"]').attr(\"disabled\", false);\n            }\n        });\n    }\n\n    self.bindLikeImage = function ()\n    {\n        $(\".likes .like-image\").click( function (e) {\n\n            var $me = $(this);\n            e.preventDefault();\n            $.get( $( this ).attr(\"href\"),\n            function (data) {\n                if (data && data.success)\n                {\n                    $me.parent().find(\".likes-count\").text(data.like_count);\n                }\n            });\n\n        });\n    }\n\n    self.bindImageClick = function ()\n    {\n        $(\"img.shared-image\").lazyload(\n        {\n            threshold : 200,\n            load: learn.lazyLoadHandler\n        });\n    }\n\n    self.bindPageResize = function()\n    {\n        self.updateLearnGrid();\n        $(window).resize( self.updateLearnGrid );\n    }\n\n    self.updateLearnGrid = function()\n    {\n        $(\".shared-image-holder\").each( function () {\n            $(this).css(\"height\", $(this).css(\"width\"))\n        });\n    }\n\n    $(\"#shared_image_shared_image\").change( function (e) {\n\n        // Only allow files less than 2Mb in size\n        if (this.files[0].size/1048576 > 2)\n        {\n            $sharedImageForm.find(\".errors\").append(\"This file is too large (bigger than 2MB), try compressing or resizing it.\");\n        } else {\n            $sharedImageForm.ajaxSubmit(\n            {\n                url: '/upload-image/',\n                type: 'post',\n                beforeSubmit:  function () {\n                    $sharedImageForm.find(\".errors\").text(\"\");\n                    $sharedImageForm.find('input[type=\"submit\"]').attr(\"disabled\", \"disabled\");\n                },\n                success: function (data) {\n\n                    if (data.success)\n                    {\n                        $(\"#shared_image_url\").val(data.file);\n                        $(\"#shared_image_preview\").attr(\"src\", data.file);\n                    } else {\n                        appendErrors(data.errors, $sharedImageForm, \".errors\");\n                    }\n\n                    $sharedImageForm.find('input[type=\"submit\"]').attr(\"disabled\", false);\n                },\n                error: function (data) {\n                    $sharedImageForm.find(\".errors\").append(\"Could not share image, try again?\");\n                    $sharedImageForm.find('input[type=\"submit\"]').attr(\"disabled\", false);\n                }\n            }\n        );\n        }\n\n\n    });\n\n\n\n}\n\nmodule.exports = sharing;\n","// slug-fields.js powers slugifying and lower-casing of fields into another field\n\nvar slug = new function()\n{\n    var self = this;\n\n    self.bindSlugFields = function()\n    {\n        $(\".js-slug\").keyup( function() {\n\n            var targetId = \"#\" + $(this).attr(\"data-object\") + \"_\" + $(this).attr(\"data-target\");\n\n            $(targetId).val( convertToSlug( $(this).val() ) );\n\n        });\n    }\n\n    self.slugify = function(el, slugEl)\n    {\n        $el = $(el);\n        $slugEl = $(slugEl);\n\n        $el.keyup( function() {\n\n            $slugEl.val( convertToSlug( $(this).val() ) );\n\n        });\n    }\n\n    self.bindLowercaseFields = function()\n    {\n        $(\".js-lowercase\").keyup( function() {\n\n            var targetId = \"#\" + $(this).attr(\"data-object\") + \"_\" + $(this).attr(\"data-target\");\n\n            $(targetId).val( convertToLowercase( $(this).val() ) );\n\n        });\n    }\n\n\n}\n\nmodule.exports = slug;\n","// sortable-list.js powers the re-orderable lists for creating steps, lessons, etc.\n\nvar sortable = new function()\n{\n    var self = this;\n\n    this.bindDeleteLinks = function()\n    {\n        // Bind our delete links\n        $(\".js-sortable-delete-link\").off();\n        $(\".js-sortable-delete-link\").bind('click', function(e) {\n            e.preventDefault();\n            $(this).parent().remove();\n        });\n    }\n\n    this.sortable = function($el, opts)\n    {\n        opts.onDrop = function($item, container, _super, event)\n        {\n            $item.removeClass(\"dragged\").removeAttr(\"style\");\n            $(\"body\").removeClass(\"dragging\");\n            if (opts.afterDrag) opts.afterDrag(event);\n        }\n\n        $el.sortable(opts);\n    }\n\n    this.bindSortableLists = function(opts, selector)\n    {\n        selector = typeof selector !== 'undefined' ? selector : '.js-sortable';\n\n        console.log(\"HELO\");\n        if (opts == null)\n        {\n            opts = {};\n            opts.afterDrag = function() {};\n        }\n\n        if (jQuery().sortable)\n        {\n\n            // Don't double up our event handlers\n            $(selector).off();\n            $(\".js-sortable-add-new\").off();\n\n            opts.onDrop = function($item, container, _super, event)\n            {\n                $item.removeClass(\"dragged\").removeAttr(\"style\");\n                $(\"body\").removeClass(\"dragging\");\n                if (opts.afterDrag) opts.afterDrag();\n            }\n\n\n            // Set up the list\n            $(selector).sortable(opts);\n\n\n            self.bindDeleteLinks();\n\n            // Add a new row to the list\n            $(\".js-sortable-add-new\").click( function(e) {\n\n\n\n                var $readSelectionFrom = $( $(this).attr(\"data-read-selection-from\") ),\n                    hiddenField = $(this).attr(\"data-hidden-field-name\"),\n                    $targetList = $( $(this).attr(\"data-target-list\") );\n\n                e.preventDefault();\n\n                $targetList.append( format(\n                                            getTemplate(\"_sortable_content_list_entry\"),\n                                            {\n                                                \"item-text\": $readSelectionFrom.find('option:selected').text(),\n                                                \"field-name\": hiddenField,\n                                                \"field-value\": $readSelectionFrom.val(),\n                                            }\n                                        )\n                                    );\n\n                self.bindDeleteLinks();\n            });\n\n        }\n    }\n}\n\nmodule.exports = sortable;\n","var twoCols = new function()\n{\n\n    var self = this;\n\n    this.repositionColumns = function()\n    {\n\n        $(\".two-cols\").each( function () {\n            var col1 = $(this).next();\n            var col2 = $(this).next().next();\n\n            col1.detach().appendTo($(this).find(\".col1\"));\n            col2.detach().appendTo($(this).find(\".col2\"));\n        });\n    }\n\n}\n\nmodule.exports = twoCols;\n","var iconTab = new function ()\n{\n    this.initialised = false;\n\n    this.init = function ()\n    {\n        if (!this.initialised)\n        {\n            $(\".icon-button-tab\").click( function(e) {\n                e.preventDefault();\n                var index = parseInt($(this).attr(\"data-target\"));\n\n                console.debug(index);\n                var $boxes = $(\".landing-page-box\");\n\n                $boxes.removeClass(\"visible\");\n                $( $boxes[index] ).addClass(\"visible\");\n            });\n\n            this.initialised = true;\n        }\n    }\n}\n\nmodule.exports = iconTab;\n","function extendJq()\n{\n    $.postWithCsrf = function (url, data, success)\n    {\n        data[$(\"meta[name=csrf-param]\").attr(\"content\")] = $(\"meta[name=csrf-token]\").attr(\"content\");\n        $.post(url, data, success);\n    };\n}\n\nmodule.exports = extendJq;\n","var util = new function()\n{\n    this.init = function()\n    {\n        // Shim for String.trunc()\n        String.prototype.trunc = String.prototype.trunc ||\n            function(n) {\n                return this.length > n ? this.substr(0, n - 3)+'...' : this;\n            };\n    }\n\n    // Extract a mongoId from a model\n    this.getId = function(attrs)\n    {\n\n        // Use a Mongo Id if we don't have one already\n        if (!attrs.id && attrs[\"_id\"][\"$oid\"])\n        {\n            return attrs[\"_id\"][\"$oid\"];\n        } else {\n            return attrs.id;\n        }\n    }\n\n    this.definedIn = function(obj, variable)\n    {\n        return\n    }\n\n    this.defined = function(variable)\n    {\n        return typeof window[variable] != \"undefined\";\n    }\n\n    this.convertToSlug = function(text)\n    {\n        return text\n            .toLowerCase()\n            .replace(/[^\\w ]+/g,'')\n            .replace(/ +/g,'-');\n    }\n\n    this.convertToLowercase = function(text)\n    {\n        return text.toLowerCase();\n    }\n\n    this.supportsTransitions = function() {\n        var b = document.body || document.documentElement,\n            s = b.style,\n            p = 'transition';\n\n        if (typeof s[p] == 'string') { return true; }\n\n        // Tests for vendor specific prop\n        var v = ['Moz', 'webkit', 'Webkit', 'Khtml', 'O', 'ms'];\n        p = p.charAt(0).toUpperCase() + p.substr(1);\n\n        for (var i=0; i<v.length; i++) {\n            if (typeof s[v[i] + p] == 'string') { return true; }\n        }\n\n        return false;\n    }\n\n    this.isVisible = function($elem)\n    {\n        if ($elem.css(\"display\") != \"none\" && $elem.css(\"visibility\") != \"hidden\")\n        {\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    this.insertTextAtCursor = function(text) {\n        var sel, range, html;\n        if (window.getSelection) {\n            sel = window.getSelection();\n            if (sel.getRangeAt && sel.rangeCount) {\n                range = sel.getRangeAt(0);\n                range.deleteContents();\n                range.insertNode( document.createTextNode(text) );\n            }\n        } else if (document.selection && document.selection.createRange) {\n            document.selection.createRange().text = text;\n        }\n    }\n\n    this.saveSelection = function() {\n        if (window.getSelection) {\n            sel = window.getSelection();\n            if (sel.getRangeAt && sel.rangeCount) {\n                return sel.getRangeAt(0);\n            }\n        } else if (document.selection && document.selection.createRange) {\n            return document.selection.createRange();\n        }\n        return null;\n    }\n\n    this.restoreSelection = function(range) {\n        if (range) {\n            if (window.getSelection) {\n                sel = window.getSelection();\n                sel.removeAllRanges();\n                sel.addRange(range);\n            } else if (document.selection && range.select) {\n                range.select();\n            }\n        }\n    }\n\n    this.findBootstrapEnvironment = function() {\n        var envs = [\"ExtraSmall\", \"Small\", \"Medium\", \"Large\"];\n        var envValues = [\"xs\", \"sm\", \"md\", \"lg\"];\n\n        var $el = $('<div>');\n        $el.appendTo($('body'));\n\n        for (var i = envValues.length - 1; i >= 0; i--) {\n            var envVal = envValues[i];\n\n            $el.addClass('hidden-'+envVal);\n            if ($el.is(':hidden')) {\n                $el.remove();\n                return envs[i]\n            }\n        };\n    }\n\n    this.getViewportWidth = function()\n    {\n        return Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n    }\n\n    this.getViewportHeight = function()\n    {\n        return Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n    }\n\n}\n\nmodule.exports = util;\n","var util = require(\"util/_util\");\n\n/**\n * Calls an Animate.css animation on the provided selector\n * @param  {[type]} element_ID [description]\n * @param  {[type]} animation  [description]\n */\nfunction animate(element_ID, animation, completeCallback, context) {\n\n    animateElement($(element_ID), animation, completeCallback, context);\n\n}\n\nfunction animateElement($element, animation, completeCallback, context) {\n\n    if (util.supportsTransitions())\n    {\n        if ($element.attr(\"data-timeout-id\"))\n        {\n            window.clearTimeout($element.attr(\"data-timeout-id\"));\n        }\n\n        $element.addClass(animation);\n        $element.addClass(\"animated\");\n\n        var timeoutId = window.setTimeout( function () {\n\n            if ($element.hasClass(\"animated\"))\n            {\n                $element.removeClass(animation);\n                $element.removeClass(\"animated\");\n\n                if (completeCallback != null)\n                {\n                    completeCallback($element);\n                }\n            }\n        }, 2000);\n\n        $element.attr(\"data-timeout-id\", timeoutId);\n\n        $element.off();\n        $element.one(\"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend\",\n            function() {\n                $element.removeClass(animation);\n                $element.removeClass(\"animated\");\n                $element.trigger(\"animationOver\");\n\n                if (completeCallback != null)\n                {\n                    completeCallback($element, context);\n                }\n            }\n        );\n    } else {\n        completeCallback($element);\n    }\n\n\n}\n\nmodule.exports = {\n    animate: animate,\n    animateElement: animateElement\n}\n","var eventUtil = new function()\n{\n  this.stopEventPropagating = function(e)\n  {\n      if (!e)\n        e = window.event;\n\n      //IE9 & Other Browsers\n      if (e.stopPropagation) {\n        e.stopPropagation();\n      }\n      //IE8 and Lower\n      else {\n        e.cancelBubble = true;\n      }\n  }\n\n  this.eventTargetDoesNotInclude = function(event, element)\n  {\n      return ( $(event.target).closest(element).length == 0 );\n  }\n}\n\nmodule.exports = eventUtil;\n","function getTemplate(name)\n{\n    return $(\"#\" + name + \"_template\").html();\n}\n\nfunction templateHtml(name)\n{\n    return $(\"[data-template=\" + name + \"]\").html();\n}\n\nfunction format(html, variables)\n{\n    for (var k in variables)\n    {\n        var re = new RegExp(\"{{#\" + k + \"}}\", 'g');\n\n        html = html.replace(re, variables[k]);\n    }\n\n    return html;\n}\n\nmodule.exports = {\n    getTemplate: getTemplate,\n    templateHtml: templateHtml,\n    format: format\n}\n"]}